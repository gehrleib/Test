This story addresses a synchronization issue where the "Retired Controls" list remains static after the assessment is generated, potentially missing controls that retire while the assessment is still in a *Draft* state.

---

## Jira Story: Dynamic Update of Retired Controls List in Draft Assessments

*User Story:*
As a Control Assessor, I need the list of retired controls within a *Control Assessment* to update dynamically while the record is in *Draft* status. This ensures that any controls retiring after the initial generation are captured before the assessment is finalized.

---

### Technical Requirements

1. *Trigger Logic:*
* Implement a mechanism (e.g., a Business Rule or Scheduled Job) that monitors the status of the Control Assessment.
* The refresh logic should only execute if `Status = Draft`.


2. *Data Refresh:*
* On a defined trigger (e.g., Form Load or a nightly batch), re-query the linked Controls table to identify any new records that have moved to a "Retired" state since the assessment was created.
* Append these newly retired controls to the existing list/table on the assessment record.


3. *Constraint:*
* Once the Control Assessment moves past *Draft* (e.g., to "In Review" or "Completed"), the list must become static to preserve the audit trail at the time of submission.



---

### Acceptance Criteria (AC)

| ID | Criteria | Validation |
| --- | --- | --- |
| *AC 1* | *Draft Dynamic Update* | Controls that retire *after* assessment generation are automatically added to the "Retired Controls" list while the assessment is in *Draft*. |
| *AC 2* | *Status Gate* | The list stops updating immediately once the assessment status changes from *Draft* to any subsequent state. |
| *AC 3* | *Data Retention* | Refreshing the list does not remove controls previously identified at the time of generation; it only appends/syncs the current state. |
| *AC 4* | *Performance* | The refresh logic does not cause significant latency (> seconds) when opening a Draft assessment form. |

---

### Implementation Notes

* *Execution Method:* A *Display Business Rule* is recommended if the list must be accurate at the exact moment the Assessor opens the record. Alternatively, a *Scheduled Script Execution* can update all "Draft" assessments nightly to reduce real-time processing overhead.
* *Audit Trail:* Ensure that the "System Updated" fields reflect that these additions were systemic rather than manual user edits.

*Would you like me to recommend the specific technical trigger (Display Business Rule vs. Scheduled Job) based on your system's record volume?*
